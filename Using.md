# Avatar Web Services
*This information is current as of August 20, 2020*

What this document is.

### Questions/Comments/Feedback
Please let me know what you think: feedback@aprettycoolprogram.com

### The myAvatool Utilities project
myAvatool is a collection of utilities for myAvatar. Please visit the myAvatool GitHub page[GitHub page](https://github.com/APrettyCoolProgram/myAvatool).

# Web Services
## List of Netsmart Web Services
To get a list of the current Netsmart Avatar Web Services:

1. Login to myAvatar
2. Click **Help**
3. Click **Radplus YYYY** (i.e. "RADplus 2017")
4. Type *"Web Services"* in the search bar
5. Click **List of Avatar Web Services**
<br>

The current list of Netsmart Web Services for myAvatar is (as of 8/20/20):

* Avatar RADplus Web Services
    * DocM.DocManagementWebService
    * WEBSVC.ClientAlerts
    * WEBSVC.DCIImport
    * WEBSVC.DictionaryUpdate
* Avatar PM Web Services
    * WEBSVC.ProgramMaintenance
    * WEBSVC.AppointmentSchedulingV2
    * WEBSVC.AppointmentScheduling
    * WEBSVC.ApptPractitionerTotal
    * WEBSVC.AttendingPractitioner
    * WEBSVC.ClientAdmission
    * WEBSVC.ClientChargeInput
    * WEBSVC.ClientDemographicsV2 web service
    * WEBSVC.ClientDemographics
    * WEBSVC.ClientDiagnosis
    * WEBSVC.ClientDischarge
    * WEBSVC.ClientEligibility Web Service
    * WEBSVC.ClientLookup
    * WEBSVC.ClientPreAdmitDischarge
    * WEBSVC.ConsentForAccess.Update42CFR
    * WEBSVC.ConsentForAccess.UpdateHIE
    * WEBSVC.ConsentForAccess.UpdateReferrals
    * WEBSVC.CrossEpisodeFinancialEligibility
    * WEBSVC.DeleteLastMovement
    * WEBSVC.DiagnosisV2
    * WEBSVC.Diagnosis
    * WEBSVC.DictionaryUpdate
    * WEBSVC.EditServiceInformation
    * WEBSVC.FinancialInvestigationV2
    * WEBSVC.FinancialInvestigation
    * WEBSVC.Financial Eligibility
    * WEBSVC.GuarantorsPayors
    * WEBSVC.HIPAA997Process
    * WEBSVC.IndividualCashPosting
    * WEBSVC.ManagedCareAuths
    * WEBSVC.NotificationService
    * WEBSVC.PaymentAdvice835
    * WEBSVC.PostingAdjustmentCodes
    * WEBSVC.PractitionerRegister
    * WEBSVC.ProgramTransfer
    * WEBSVC.ReferralSourceMaintenance
    * WEBSVC.SFMIAllPopulationHealth
    * WEBSVC.SFMIClientProfile
    * WEBSVC.SFMIDDProxyMeasures
    * WEBSVC.SFMIEnrollmentElig
    * WEBSVC.SFMIFuncAssess Web Service
    * WEBSVC.SFMITaxableIncome
    * WEBSVC.SiteRegistration
    * WEBSVC.StaffMemberHoursExceptions
    * WEBSVC.TeamDefinition
    * WEBSVC.TEDSAdmission Web Service
    * WEBSVC.TEDSDischarge
    * WEBSVC.ToDoItem
    * WEBSVC.UserManagement
    * WSAPI.PM.Appointment.AppointmentServiceV2
    * WSAPI.PM.Appointment.AppointmentService
    * WSAPI.PM.BedCodes.BedCodesService
    * WSAPI.PM.Client.ClientServiceV2 Web Service
    * WSAPI.PM.Client.ClientService
    * WSAPI.PM.ClientServices.ClientServicesService
    * WSAPI.PM.DictionaryCodes.DictionaryCodesService
    * WSAPI.PM.EligTableDemographics.EligTableDemographicsService
    * WSAPI.PM.Episodes.EpisodesServices
    * WSAPI.PM.Financial.FinancialInvestigationServiceV2
    * WSAPI.PM.GroupCodes.GroupCodesService
    * WSAPI.PM.GuarantorCodes.GuarantorCodesServiceV2
    * WSAPI.PM.GuarantorCodes.GuarantorCodesService
    * WSAPI.PM.ProgramCodes.ProgramCodesService
    * WSAPI.PM.ServiceCodes.ServiceCodesService
    * WSAPI.PM.SiteCodes.SiteCodesService
    * WSAPI.PM.Staff.StaffService
    * WSAPI.PM.UnitCodes.UnitCodesService
    * WSAPI.RADplus.Authenticate.AuthenticateService
    * WSAPI.RADplus.ToDo.ToDoService
    * WSAPI.RADplusDictionaryCodes.DictionaryCodesService
* Avatar Cal-PM Web Services
    * WEBSVC.AdmissionV2
    * WEBSVC.CalOMSAdmission
    * WEBSVC.CalOMSAnnualUpdate
    * WEBSVC.CalOMSDischarge
    * WEBSVC.ClientDiagnosisV2
    * WEBSVC.ClientDischargeV2
    * WEBSVC.ClientPregnancyV2
    * WEBSVC.ClientPregnancy
    * WEBSVC.ClientPregnancyV2
    * WEBSVC.ClinicianServicesV2
    * WEBSVC.CSIAdmission
    * WEBSVC.CSIClientAdmissionV2
    * WEBSVC.DictionaryUpdate
    * WEBSVC.FinancialEligibilityV2
    * WEBSVC.Leaves
    * WEBSVC.PostingAdjustmentCodes
    * WEBSVC.ClinicianServices
    * WEBSVC.Practitioner Termination
    * WEBSVC.ProgramMaintenance
    * WEBSVC.ReferralSourceMaintenance
    * WEBSVC.ReturnFromLeaves
* Avatar CWS Web Services
    * Avatar CWS WSAPI.RADplus.Authenticate.AuthenticateService
    * Avatar CWS WSAPI.RADplus.DictionaryCodes.DictionaryCodesService
    * Avatar CWS WSAPI.RADplus.ToDo.ToDoService
    * WEBSVC.ClientAllergies
    * WEBSVC.ClientVitals
    * WEBSVC.OrderEntryOrders
    * WEBSVC.PHPData
    * WEBSVC.ProblemList
    * WEBSVC.ProgressNotes.Client.Request
    * WEBSVC.ProgressNotes.Group.Request
    * WSAPI.CWS.Allergy.AllergyService
    * WSAPI.CWS.Vitals.VitalsService
    * WSAPI.OrderEntry.LabOrders.LabOrdersService
    * WSAPI.OrderEntry.MedOrders.MedOrdersService
* Avatar MSO Web Services
    * WEBSVC.ClaimEntry
    * WEBSVC.ClaimPreAdjudication
    * WEBSVC.MemberEnrollment
    * WEBSVC.MemberTermination
    * WEBSVC.MSOToParentMapping
    * WEBSVC.ServiceAuthorization
    * WEBSVC.ServiceEntry
    * WEBSVC.SFMIPIAdmissionAppt
    * WEBSVC.SFMIPIAssessmentApt
    * WEBSVC.SFMIPIDtxaftercareApt
    * WEBSVC.SFMIPISentinelEvent
    * WEBSVC.SFNCcapcasemanage
    * WEBSVC.SFNCclientlookup
    * WEBSVC.SFNCduplicatecheck
    * WEBSVC.SFNCiptreatrep
    * WEBSVC.SFNCLmeinfo
    * WEBSVC.SFNCmcaidelig
    * WEBSVC.SFNCopreviewform
    * WEBSVC.SFNCtrmtauthreq
    * WEBSVC.UpdateMemberDemographics
* Avatar CFMS Web Services
    * WEBSVC.TransactionPosting

# Adding a Netsmart Avatar Web Service to your project
Before you add a Netsmart Web Service to your project, you need to know where the Netsmart Web Services are located.

## Determining the Web Services location
To do this in for AVPM Web Services in your LIVE environment
1. Login to your LIVE environment
2. Open the "Registry Settings" form
3. In the upper right text box, type "Web Service"
4. Click "View Registry Settings"

A list of Registry Settings will appear.

Find the "Avatar Web Services[Avatar PM]" > "Set System Defaults" entry.

There should be a line that looks similar to this:

URL Regirsty Setting Value: https://<ORGANIZATION>csp.netsmartcloud.com/csp/<ORGANIZATION>/avpm

where "ORGANIZATION" is the name of your organization/company.

For other Avatar Environments, the Web Services location will look like this:

URL Regirsty Setting Value: https://<ORGANIZATION>csp.netsmartcloud.com/csp/<ORGANIZATION><ENVIRONMENT>/avpm

## Verifying the Web Services location
To verify that the Netsmart Web Services are where they should be, and are active, open the following URL in a web browser:
```
https://<ORGANIZATION>.netsmartcloud.com/csp/<ORGANIZATION><ENVIRONMENT>/avpm/WEBSVC.UserManagement.cls
```

The supported operations of the User Management Web Service should be displayed.

Next, add "?WSDL" to the end of the URL so it looks like this:
```
https://<ORGANIZATION>.netsmartcloud.com/csp/<ORGANIZATION><ENVIRONMENT>/avpm/WEBSVC.UserManagement.cls?WSDL
```

This should display the Web Service Definition Language XML.

# Adding a Netsmart Web Service to your project:
These instructions are for Visual Studio 2019 projects .NET Framwork 4.7.2 C# projects.

1. Right-click on your project
2. Click **Add**
3. Click **Service Reference**
4. In the *Address* field, put the URL for the Web Service WSDL:
	```
	https://<ORGANIZATION>.netsmartcloud.com/csp/<ORGANIZATION><ENVIRONMENT>/avpm/WEBSVC.UserManagement.cls?WSDL
	```

5. Click **Go**. The Web Service should be found.

6. In the *Namespace* field, give the Web Service a name. This is the name that your project will use to reference
	   the Web Service, so make it something meaningful. For example:

		`NtstWebSvcUatUserManagement`

7. Click **Ok**.

Repeat steps 1-5 for each of your Avatar environments.

# Netsmart Web Services that are currently used with myAvatool User Management
myAvatool uses the following Netsmart Web Services:

- User Management (WEBSVC.UserManagement.CLS)